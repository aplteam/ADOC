 R←Test_Usercommand_02(stopFlag batchFlag);⎕TRAP;inCurrentDir;folders;files;executed
⍝ Test whether the user command executed is what we have in the current directory.
⍝ If this fails you might well execute something you don't really wanna execute!
 R←∆Failed
 ⎕TRAP←(999 'C' '. ⍝ Deliberate error')(0 'N')

 inCurrentDir←#.APLTreeUtils.ReadUtf8File'ADOC_UC.dyalog'
 folders←⎕SE.UCMD'Settings cmddir'
 (('∘'=folders)/folders)←';'
 folders←';'#.APLTreeUtils.Split folders
 files←folders,¨⊂'\ADOC_UC.dyalog'
 files←(#.FilesAndDirs.IsFile files)/files
 →FailsIf 0∊⍴files
 executed←#.APLTreeUtils.ReadUtf8File⊃files
 →PassesIf executed≡inCurrentDir

 R←∆OK
